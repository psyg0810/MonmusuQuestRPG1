=begin
=窓/最終確認




==更新履歴
  Date     Version Author Comment

=end

#==============================================================================
# ■ Window_PopupConfirm
#==============================================================================
class Window_PopupConfirm < Window_Selectable
  #--------------------------------------------------------------------------
  # ● オブジェクト初期化
  #--------------------------------------------------------------------------
  def initialize
    @title = ""
    @name  = ""
    super(0,0,1,1)
    self.z = 200
  end
  #--------------------------------------------------------------------------
  # ● ウィンドウ幅の取得
  #--------------------------------------------------------------------------
  def window_width
    text_size(sprintf(@title, @name)).width + 20 + standard_padding * 2
  end
  #--------------------------------------------------------------------------
  # ● ウィンドウ高さの取得
  #--------------------------------------------------------------------------
  def window_height
    fitting_height(3)
  end
  #--------------------------------------------------------------------------
  # ● 項目数の取得
  #--------------------------------------------------------------------------
  def item_max
    2
  end
  #--------------------------------------------------------------------------
  # ● 項目の幅を取得
  #--------------------------------------------------------------------------
  def item_width
    100
  end
  #--------------------------------------------------------------------------
  # ● 項目を描画する矩形の取得
  #--------------------------------------------------------------------------
  def item_rect(index)
    rect = Rect.new
    rect.width = item_width
    rect.height = item_height
    rect.x = (window_width / 2) - (item_width / 2)
    rect.y = (index + 1) / col_max * item_height
    rect
  end
  #--------------------------------------------------------------------------
  # ● タイトルのセット
  #--------------------------------------------------------------------------
  def set_title(title)
    @title = title
  end
  #--------------------------------------------------------------------------
  # ● 名前のセット
  #--------------------------------------------------------------------------
  def set_name(name)
    @name = name
   refresh
  end
  #--------------------------------------------------------------------------
  # ● 決定ボタンが押されたときの処理
  #--------------------------------------------------------------------------
  def process_ok
    case self.index
    when 0
#      Sound.play_ok
      Input.update
      deactivate
      call_ok_handler      
    when 1
      process_cancel      
    end
  end
  #--------------------------------------------------------------------------
  # ● 一行目の描画
  #--------------------------------------------------------------------------
  def draw_title
    rect = Rect.new(0, 0, contents_width, line_height)
    draw_text(rect, sprintf(@title, @name), 1)
  end
  #--------------------------------------------------------------------------
  # ● 項目の描画
  #--------------------------------------------------------------------------
  def draw_item(index)
    draw_text(item_rect_for_text(index), ["はい","いいえ"][index], 1)
  end
  #--------------------------------------------------------------------------
  # ● リフレッシュ
  #--------------------------------------------------------------------------
  def refresh
    move((Graphics.width/2) - (window_width/2), (Graphics.height/2) - (window_height/2), window_width, window_height)
    update_padding
    create_contents
    draw_title
    draw_all_items
  end
end
